"use client";

import { LibraryType } from "./libraryTypes";
import { twMerge } from "tailwind-merge";
import Bug from "@/assets/icons/Bug.svg";
import { TAnlaysisCode } from "@/app/my-library/vulnerability-analysis/page";
import ModalTitle from "@/components/atoms/modal/ModalTitle";
import Modal from "@/components/atoms/modal";
import ModalExplanation from "@/components/atoms/modal/ModalExplanation";

type PropTypes = TAnlaysisCode & {
  className: string;
  children: React.ReactNode;
  onClose?: () => void;
};

const VulnerabilityAnalysisCode = ({
  className,
  status = "",
  onClose = () => {},
  children,
}: PropTypes) => {
  return (
    <>
      {status === "analyzing" ? (
        <>
          <Modal>
            <>
              <div className="flex">
                <button
                  onClick={onClose}
                  type="button"
                  className="ms-auto inline-flex h-8 w-8 items-center justify-center rounded-lg bg-transparent text-sm text-gray-400 hover:bg-gray-200 hover:text-gray-900"
                  data-modal-hide="default-modal"
                >
                  <svg
                    className="h-3 w-3"
                    aria-hidden="true"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 14 14"
                  >
                    <path
                      stroke="currentColor"
                      strokeLinecap="round"
                      strokeLinejoin="round"
                      strokeWidth="2"
                      d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"
                    />
                  </svg>
                  <span className="sr-only">Close modal</span>
                </button>
              </div>
            </>
            <div className="inset-0 mb-[10px] flex items-center justify-center text-center">
              <Bug />
            </div>
            <ModalTitle titleText="소스코드 취약점 분석중"></ModalTitle>
            <ModalExplanation explanationText="AI 플로디텍터가 문제를 분석중 입니다. 코드가 많을수록 처리시간이 길어집니다."></ModalExplanation>
          </Modal>
        </>
      ) : (
        <>
          <div
            className={twMerge(
              "h-[980px] w-[729px] rounded-xl border border-line-default p-10",
              className,
            )}
          >
            {children}
          </div>
        </>
      )}
    </>
  );
};
export default VulnerabilityAnalysisCode;
